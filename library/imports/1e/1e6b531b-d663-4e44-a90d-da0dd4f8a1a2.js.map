{"version":3,"sources":["../../../../assets/scripts/assets/scripts/game.js"],"names":["mEmitter","require","config","cc","Class","extends","Component","properties","bg_1","Node","bg_2","title","Label","gamePlaying","gamePause","gameReady","gameOver","score","scoreOver","pre_hero","Prefab","_hero","pre_creep","pre_assassin","pre_motherShip","pre_bullet","onLoad","instance","manager","director","getCollisionManager","enabled","init","setTouch","registerEvent","event","UPDATE_SCORE","updateScore","bind","GAME_OVER","gameFinished","start","update","dt","setBg","gameState","PLAYING","bulletTime","createBullet","spawnCreeps","spawnAssassins","spawnMotherShips","isBgMove","y","height","zIndex","active","READY","string","spawnCreepTime","spawnAssasinTime","spawnMotherShipTime","level","spawnHero","node","on","name","pos_hero","getPosition","pos_mov","getDelta","x","setPosition","v2","log","OVER","removeAllBullet","removeAllEnemy","createEnemy","pre_enemy","speed","Math","floor","random","enemy","instantiate","js","getComponent","parent","Number","updateLevel","pos","bullet","children","i","length","onBulletKilled","onEnemyKilled","removeHero","onHeroKilled","clickBtn","sender","str","emit","UPDATE_GAMESTATE","PAUSE"],"mappings":"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","file":"game.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["const mEmitter = require(\"./mEmitter\");\nconst config = require(\"config\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        bg_1: cc.Node,\n        bg_2: cc.Node,\n        title: cc.Label,\n        gamePlaying: cc.Node,\n        gamePause: cc.Node,\n        gameReady: cc.Node,\n        gameOver: cc.Node,\n\n        score: cc.Label,\n        scoreOver: cc.Label,\n\n\n        pre_hero: cc.Prefab,\n        _hero: cc.Node,\n\n        pre_creep: cc.Prefab,\n        pre_assassin: cc.Prefab,\n        pre_motherShip: cc.Prefab,\n        pre_bullet: cc.Prefab\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        mEmitter.instance = new mEmitter();\n        //cc.log(config.event.UPDATE_SCORE)\n        let manager = cc.director.getCollisionManager();\n        manager.enabled = true;\n        //manager.enabledDebugDraw = true;\n        this.init();\n        this.setTouch()\n\n        mEmitter.instance.registerEvent(config.event.UPDATE_SCORE, this.updateScore.bind(this))\n        mEmitter.instance.registerEvent(config.event.GAME_OVER, this.gameFinished.bind(this))\n\n    },\n\n    start() {\n\n    },\n\n    update(dt) {\n\n        this.setBg();\n        if (this.gameState == config.gameState.PLAYING) {\n            this.bulletTime++;\n\n            if (this.bulletTime == 10) {\n                this.bulletTime = 0;\n                this.createBullet();\n            }\n\n            this.spawnCreeps(dt);\n            this.spawnAssassins(dt);\n            this.spawnMotherShips(dt);\n        }\n    },\n    init() {\n        this.isBgMove = false;\n        this.bg_1.y = 0;\n        this.bg_2.y = this.bg_1.y + this.bg_1.height;\n        this.gameReady.zIndex = 1;\n        // this.gameOver.zIndex = -1;\n        this.gamePause.zIndex = 2;\n        //this.score.zIndex = 3;\n        this.gameReady.active = true;\n        this.gamePlaying.active = false;\n        this.gamePause.active = false;\n        this.gameOver.active = false;\n\n        this.bulletTime = 0;\n        this.gameState = config.gameState.READY\n        this.score.string = 0;\n\n        this.spawnCreepTime = 0\n        this.spawnAssasinTime = 0\n        this.spawnMotherShipTime = 0\n\n        this.level = 1\n        this.spawnHero()\n    },\n    setTouch() {\n        this.node.on(\"touchstart\", function (event) {\n            this.gameState = config.gameState.PLAYING;\n            this.gameReady.active = false;\n            this.gamePlaying.active = true;\n            //this.gameOver.active = false;\n            this.isBgMove = true;\n        }, this);\n        this.node.on(\"touchmove\", function (event) {\n            if (this._hero.name != \"\") {\n                let pos_hero = this._hero.getPosition()\n                let pos_mov = event.getDelta()\n                let x = pos_hero.x + pos_mov.x\n                let y = pos_hero.y + pos_mov.y\n                if (x < 280 && x > -280)\n                    if (y < 400 && y > -400)\n                        this._hero.setPosition(cc.v2(x, y))\n            }\n        }, this);\n        this.node.on(\"touchend\", function (event) {\n            cc.log(\"touchend\")\n\n        }, this)\n\n    },\n    gameFinished() {\n        cc.log(\"test\")\n        this.gameState = config.gameState.OVER;\n        this.removeAllBullet()\n        this.removeAllEnemy()\n\n        this.gameOver.active = true;\n        this.scoreOver.string = this.score.string;\n    },\n    spawnCreeps(dt) {\n        this.spawnCreepTime += dt;\n        if (this.spawnCreepTime >= 1 / this.level) {\n            this.spawnCreepTime = 0;\n            this.createEnemy(this.pre_creep, 1)\n        }\n    },\n    spawnAssassins(dt) {\n        this.spawnAssasinTime += dt;\n        if (this.spawnAssasinTime >= 2 / this.level) {\n            this.spawnAssasinTime = 0;\n            this.createEnemy(this.pre_assassin, 2)\n        }\n    },\n    spawnMotherShips(dt) {\n        this.spawnMotherShipTime += dt;\n        if (this.spawnMotherShipTime >= 5 / this.level) {\n            this.spawnMotherShipTime = 0;\n            this.createEnemy(this.pre_motherShip, 0.2)\n        }\n    },\n    createEnemy(pre_enemy, speed) {\n        let x = Math.floor(Math.random() * 600) + 1 - 300; // -300 300\n        let y = Math.floor(Math.random() * 900) + 1 + 550; // 550 1450\n        let enemy = cc.instantiate(pre_enemy)\n        let js = enemy.getComponent(\"enemy\")\n        js.speed = Math.floor(Math.random() * 2) + speed + this.level;\n        enemy.parent = this.node\n        enemy.setPosition(cc.v2(x, y))\n    },\n    spawnHero() {\n        this._hero = cc.instantiate(this.pre_hero)\n        this._hero.parent = this.node\n        this._hero.setPosition(cc.v2(0, -300))\n    },\n    updateScore(score) {\n        //cc.log(\"tets\")\n        this.score.string = Number(this.score.string) + score\n        this.updateLevel();\n    },\n    updateLevel() {\n        this.level = Math.floor(this.score.string / 50) + 1;\n    },\n    setBg() {\n        if (this.isBgMove) {\n            this.bg_2.y -= 0.5;\n            this.bg_1.y -= 0.5;\n            if (this.bg_1.y <= -this.bg_1.height)\n                this.bg_1.y = this.bg_2.y + this.bg_1.height;\n            if (this.bg_2.y <= -this.bg_2.height)\n                this.bg_2.y = this.bg_1.y + this.bg_2.height;\n        }\n    },\n    createBullet() {\n        if (this._hero.name != \"\") {\n            let pos = this._hero.getPosition()\n            let bullet = cc.instantiate(this.pre_bullet)\n            bullet.parent = this.node;\n            bullet.setPosition(cc.v2(pos.x, pos.y + this._hero.height / 2))\n        }\n    },\n\n    removeAllBullet() {\n        let children = this.node.children\n        for (let i = children.length - 1; i >= 0; i--) {\n            let bullet = children[i].getComponent(\"bullet\")\n            if (bullet)\n                bullet.onBulletKilled()\n        }\n    },\n    removeAllEnemy() {\n        let children = this.node.children\n        for (let i = children.length - 1; i >= 0; i--) {\n            let enemy = children[i].getComponent(\"enemy\")\n            if (enemy)\n                enemy.onEnemyKilled()\n        }\n    },\n    removeHero() {\n        let children = this.node.children\n        for (let i = children.length - 1; i >= 0; i--) {\n            let enemy = children[i].getComponent(\"hero\")\n            if (enemy) {\n                enemy.onHeroKilled()\n            }\n        }\n    },\n    clickBtn(sender, str) {\n        switch (str) {\n            case \"resume\":\n                cc.log(\"resume\")\n                this.isBgMove = true;\n                this.gamePause.active = false;\n                this.gamePlaying.active = true;\n                this.gameState = config.gameState.PLAYING;\n                mEmitter.instance.emit(config.event.UPDATE_GAMESTATE, this.gameState)\n                break;\n            case \"pause\":\n                cc.log(\"pause\")\n                //this.gameReady.active = false;\n                //this.gamePlaying.active = false;\n                this.gamePause.active = true;\n                //this.gameOver.active = false;\n                this.isBgMove = false;\n                this.gameState = config.gameState.PAUSE;\n                mEmitter.instance.emit(config.event.UPDATE_GAMESTATE, this.gameState)\n                break;\n            case \"restart\":\n                cc.log(\"restart\")\n                //this.gameOver.active = false;\n                this.gameState = config.gameState.READY;\n                this.removeAllBullet()\n                this.removeAllEnemy()\n                this.removeHero()\n                this.init();\n                break;\n        }\n    },\n});\n"]}